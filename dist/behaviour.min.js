(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ECS = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function E () {
	// Keep this empty so it's easier to inherit from
  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)
}

E.prototype = {
	on: function (name, callback, ctx) {
    var e = this.e || (this.e = {});

    (e[name] || (e[name] = [])).push({
      fn: callback,
      ctx: ctx
    });

    return this;
  },

  once: function (name, callback, ctx) {
    var self = this;
    function listener () {
      self.off(name, listener);
      callback.apply(ctx, arguments);
    };

    listener._ = callback
    return this.on(name, listener, ctx);
  },

  emit: function (name) {
    var data = [].slice.call(arguments, 1);
    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();
    var i = 0;
    var len = evtArr.length;

    for (i; i < len; i++) {
      evtArr[i].fn.apply(evtArr[i].ctx, data);
    }

    return this;
  },

  off: function (name, callback) {
    var e = this.e || (this.e = {});
    var evts = e[name];
    var liveEvents = [];

    if (evts && callback) {
      for (var i = 0, len = evts.length; i < len; i++) {
        if (evts[i].fn !== callback && evts[i].fn._ !== callback)
          liveEvents.push(evts[i]);
      }
    }

    // Remove event from queue to prevent memory leak
    // Suggested by https://github.com/lazd
    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910

    (liveEvents.length)
      ? e[name] = liveEvents
      : delete e[name];

    return this;
  }
};

module.exports = E;

},{}],2:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),Behaviour=function(){function t(){_classCallCheck(this,t),this.entity=null,this.object=null,this._callbacks=[]}return _createClass(t,[{key:"attach",value:function(t){this.entity=t,this.object=t.object}},{key:"onAttach",value:function(t){}},{key:"onDetach",value:function(){}},{key:"detach",value:function(){this.emit("detach",this);for(var t=0;t<this._callbacks.length;t++)this.off.apply(this,this._callbacks[t])}},{key:"on",value:function(){this._callbacks.push(arguments),this.entity.on.apply(this.entity,arguments)}},{key:"once",value:function(){this._callbacks.push(arguments),this.entity.once.apply(this.entity,arguments)}},{key:"off",value:function(){this.entity.off.apply(this.entity,arguments)}},{key:"emit",value:function(){this.entity.emit.apply(this.entity,arguments)}}]),t}();module.exports=Behaviour;

},{}],3:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),EventEmitter=require("tiny-emitter"),Entity=function(t){function e(t,r){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this));return n.id=r,n.object=t,n.behaviours=[],n.on("detach",n.detach.bind(n)),n}return _inherits(e,t),_createClass(e,[{key:"getBehaviour",value:function(t){var e="string"==typeof t,r=function(e){return e.constructor.name===t},n=function(e){return e.constructor.name===t.name};return this.behaviours.filter(e?r:n)[0]}},{key:"attach",value:function(t,e){this.behaviours.push(t),t.attach(this),t.onAttach.apply(t,e)}},{key:"detach",value:function(t){var e=this.behaviours.indexOf(t);-1!==e&&(this.behaviours.splice(e,1),t.onDetach())}},{key:"detachAll",value:function(){for(var t=this.behaviours.length;t--;)this.detach(this.behaviours[t])}},{key:"update",value:function(){for(var t=this.behaviours.length;t--;)this.behaviours[t].update&&this.behaviours[t].update()}},{key:"destroy",value:function(){this.detachAll(),this.emit("destroy")}}]),e}(EventEmitter);module.exports=Entity;

},{"tiny-emitter":1}],4:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Entity=require("./Entity"),System=function(){function t(){_classCallCheck(this,t),this.objectId=0,this.entities={}}return _createClass(t,[{key:"add",value:function(t){this.entities[t.id]=t,t.on("destroy",this.onEntityDestroy.bind(this,t))}},{key:"update",value:function(){for(var t in this.entities)this.entities[t].update()}},{key:"mount",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e.addBehaviour||(e.addBehaviour="addBehaviour"),e.getEntity||(e.getEntity="getEntity"),this.baseClass=t,this.mountOptions=e;var i=this;this.baseClass.prototype[e.getEntity]=function(){return this.__ENTITY__||(this.__ENTITY__=new Entity(this,i.objectId++),i.add(this.__ENTITY__)),this.__ENTITY__},this.baseClass.prototype[e.addBehaviour]=function(t){var i=this[e.getEntity](),n=Array.prototype.splice.apply(arguments,[1]);return i.attach(t,n),i}}},{key:"onEntityDestroy",value:function(t){delete this.entities[t.id]}},{key:"destroy",value:function(){delete this.baseClass.prototype[this.mountOptions.addBehaviour],delete this.baseClass.prototype[this.mountOptions.getEntity]}}]),t}();module.exports=System;

},{"./Entity":3}],5:[function(require,module,exports){
"use strict";var Behaviour=require("./Behaviour"),System=require("./System");module.exports.createComponentSystem=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],t=new System;return t.mount(e,r),t},module.exports.Behaviour=Behaviour;

},{"./Behaviour":2,"./System":4}]},{},[5])(5)
});